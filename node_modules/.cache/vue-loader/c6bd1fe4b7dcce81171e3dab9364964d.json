{"remainingRequest":"/home/duanyufi/Web/flower/wolfplay/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/duanyufi/Web/flower/wolfplay/src/views/Test.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/duanyufi/Web/flower/wolfplay/src/views/Test.vue","mtime":1604116391187},{"path":"/home/duanyufi/Web/flower/wolfplay/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/duanyufi/Web/flower/wolfplay/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/duanyufi/Web/flower/wolfplay/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/duanyufi/Web/flower/wolfplay/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lIDogJ3Rlc3QnLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtZXNzYWdlczogIiIsCiAgICAgIHdlYnNvY2s6IG51bGwsCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5pbml0V2ViU29ja2V0KCk7CiAgfSwKICBkZXN0cm95ZWQoKSB7CiAgICB0aGlzLndlYnNvY2suY2xvc2UoKSAvL+emu+W8gOi3r+eUseS5i+WQjuaWreW8gHdlYnNvY2tldOi/nuaOpQogIH0sCiAgbWV0aG9kczogewogICAgaW5pdFdlYlNvY2tldCgpeyAvL+WIneWni+WMlndlb3NvY2tldAogICAgICBjb25zdCB3c3VyaSA9ICJ3czovLzEwLjIxLjE0Mi4yMzU6ODAwMS93cy9jaGF0LyI7CiAgICAgIHRoaXMud2Vic29jayA9IG5ldyBXZWJTb2NrZXQod3N1cmkpOwogICAgICB0aGlzLndlYnNvY2sub25tZXNzYWdlID0gdGhpcy53ZWJzb2NrZXRvbm1lc3NhZ2U7CiAgICAgIHRoaXMud2Vic29jay5vbm9wZW4gPSB0aGlzLndlYnNvY2tldG9ub3BlbjsKICAgICAgdGhpcy53ZWJzb2NrLm9uZXJyb3IgPSB0aGlzLndlYnNvY2tldG9uZXJyb3I7CiAgICAgIHRoaXMud2Vic29jay5vbmNsb3NlID0gdGhpcy53ZWJzb2NrZXRjbG9zZTsKICAgICAgY29uc29sZS5sb2coIldlYnNvY2tldCBpbml0ZWQhIik7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMud2Vic29jaykKICAgIH0sCiAgICB3ZWJzb2NrZXRvbm9wZW4oKXsgLy/ov57mjqXlu7rnq4vkuYvlkI7miafooYxzZW5k5pa55rOV5Y+R6YCB5pWw5o2uCiAgICAgIGNvbnNvbGUubG9nKCJXZWJTb2NrZXQgb3BlbmVkISIpOwogICAgfSwKICAgIHdlYnNvY2tldG9uZXJyb3IoKXsvL+i/nuaOpeW7uueri+Wksei0pemHjei/ngogICAgICBjb25zb2xlLmxvZygiQ29ubmVjdGlvbiBlcnJvciIpOwogICAgICB0aGlzLmluaXRXZWJTb2NrZXQoKTsKICAgIH0sCiAgICB3ZWJzb2NrZXRvbm1lc3NhZ2UoZSl7IC8v5pWw5o2u5o6l5pS2CiAgICAgIGNvbnN0IHJlZGF0YSA9IEpTT04ucGFyc2UoZS5kYXRhKTsKICAgICAgdGhpcy5tZXNzYWdlcyArPSByZWRhdGE7CiAgICAgIGNvbnNvbGUubG9nKHJlZGF0YSk7CiAgICB9LAogICAgd2Vic29ja2V0c2VuZChEYXRhKXsvL+aVsOaNruWPkemAgQogICAgICB0aGlzLndlYnNvY2suc2VuZChEYXRhKTsKICAgICAgY29uc29sZS5sb2coIkRhdGEgc2VudCIpOwogICAgfSwKICAgIHdlYnNvY2tldGNsb3NlKCl7ICAvL+WFs+mXrQogICAgICBjb25zb2xlLmxvZygn5pat5byA6L+e5o6lJyk7CiAgICB9LAogICAgdGVzdCgpIHsKICAgICAgdmFyIHJlc3BvbnNlRGF0YSA9IHt9OwogICAgICByZXNwb25zZURhdGEuY29udGVudCA9ICJhbm90aGVyIG1lc3NhZ2UiOwogICAgICByZXNwb25zZURhdGEudXNlciA9ICJEdWFuWXVGaSI7CiAgICAgIHJlc3BvbnNlRGF0YS5yb29tID0gIjEyMTIzIjsKICAgICAgdGhpcy53ZWJzb2NrZXRzZW5kKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlRGF0YSkpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLndlYnNvY2spOwogICAgfQogIH0sCn0K"},{"version":3,"sources":["Test.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Test.vue","sourceRoot":"src/views","sourcesContent":["<!--<template>\n  <div class=\"title\">\n    <h1>{{ userInfo }}</h1>\n    <v-text-field\n      v-model = \"Form.name\"\n    />\n    <v-btn @click = \"submit\">Submit</v-btn>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport service from '@/utils/request'\nexport default {\n  name: \"Test\",\n  data() {\n    return {\n      Form : {\n        name: \"\"\n      }\n    }\n  },\n  computed: {\n    ...mapGetters(\"user\", [\"userInfo\", \"token\"]),\n  },\n  methods: {\n    async submit() {\n      const res = await service({\n        url: '/user/test/',\n        method: 'post',\n        data: JSON.stringify(this.Form)\n      });\n      console.log(res.data)\n    }\n  }\n}\n</script>\n\n<style lang = \"scss\">\n.title {\n  text-align: center;\n}\n</style>-->\n<template>\n  <div class=\"test\">\n    <p>{{ messages }}</p>\n    <v-btn @click = \"test\">Submit</v-btn>\n  </div>\n</template>\n\n<script>\n  export default {\n    name : 'test',\n    data() {\n      return {\n        messages: \"\",\n        websock: null,\n      }\n    },\n    created() {\n      this.initWebSocket();\n    },\n    destroyed() {\n      this.websock.close() //离开路由之后断开websocket连接\n    },\n    methods: {\n      initWebSocket(){ //初始化weosocket\n        const wsuri = \"ws://10.21.142.235:8001/ws/chat/\";\n        this.websock = new WebSocket(wsuri);\n        this.websock.onmessage = this.websocketonmessage;\n        this.websock.onopen = this.websocketonopen;\n        this.websock.onerror = this.websocketonerror;\n        this.websock.onclose = this.websocketclose;\n        console.log(\"Websocket inited!\");\n        console.log(this.websock)\n      },\n      websocketonopen(){ //连接建立之后执行send方法发送数据\n        console.log(\"WebSocket opened!\");\n      },\n      websocketonerror(){//连接建立失败重连\n        console.log(\"Connection error\");\n        this.initWebSocket();\n      },\n      websocketonmessage(e){ //数据接收\n        const redata = JSON.parse(e.data);\n        this.messages += redata;\n        console.log(redata);\n      },\n      websocketsend(Data){//数据发送\n        this.websock.send(Data);\n        console.log(\"Data sent\");\n      },\n      websocketclose(){  //关闭\n        console.log('断开连接');\n      },\n      test() {\n        var responseData = {};\n        responseData.content = \"another message\";\n        responseData.user = \"DuanYuFi\";\n        responseData.room = \"12123\";\n        this.websocketsend(JSON.stringify(responseData));\n        console.log(this.websock);\n      }\n    },\n  }\n</script>\n<style lang='less'>\n \n</style>\n"]}]}