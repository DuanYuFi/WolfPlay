{"remainingRequest":"/home/duanyufi/Web/flower/wolfplay/node_modules/babel-loader/lib/index.js!/home/duanyufi/Web/flower/wolfplay/node_modules/eslint-loader/index.js??ref--13-0!/home/duanyufi/Web/flower/wolfplay/src/store/modules/user.js","dependencies":[{"path":"/home/duanyufi/Web/flower/wolfplay/src/store/modules/user.js","mtime":1602739755795},{"path":"/home/duanyufi/Web/flower/wolfplay/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/duanyufi/Web/flower/wolfplay/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/duanyufi/Web/flower/wolfplay/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvZHVhbnl1ZmkvV2ViL2Zsb3dlci93b2xmcGxheS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9ob21lL2R1YW55dWZpL1dlYi9mbG93ZXIvd29sZnBsYXkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgeyBsb2dpbiB9IGZyb20gJ0AvYXBpL3VzZXInOwppbXBvcnQgcm91dGVyIGZyb20gJ0Avcm91dGVyL2luZGV4JzsKZXhwb3J0IHZhciB1c2VyID0gewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHsKICAgIHVzZXJJbmZvOiB7CiAgICAgIC8vIHV1aWQ6ICcnLAogICAgICB1c2VybmFtZTogJycsCiAgICAgIGVtYWlsOiAnJywKICAgICAgSXNBZG1pbjogZmFsc2UKICAgIH0sCiAgICB0b2tlbjogJycsCiAgICBleHBpcmVzQXQ6ICcnCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHNldFVzZXJJbmZvOiBmdW5jdGlvbiBzZXRVc2VySW5mbyhzdGF0ZSwgdXNlckluZm8pIHsKICAgICAgLy8g6L+Z6YeM55qEIGBzdGF0ZWAg5a+56LGh5piv5qih5Z2X55qE5bGA6YOo54q25oCBCiAgICAgIHN0YXRlLnVzZXJJbmZvID0gdXNlckluZm87CiAgICB9LAogICAgc2V0VG9rZW46IGZ1bmN0aW9uIHNldFRva2VuKHN0YXRlLCB0b2tlbikgewogICAgICAvLyDov5nph4znmoQgYHN0YXRlYCDlr7nosaHmmK/mqKHlnZfnmoTlsYDpg6jnirbmgIEKICAgICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICAgIH0sCiAgICBzZXRFeHBpcmVzQXQ6IGZ1bmN0aW9uIHNldEV4cGlyZXNBdChzdGF0ZSwgZXhwaXJlc0F0KSB7CiAgICAgIC8vIOi/memHjOeahCBgc3RhdGVgIOWvueixoeaYr+aooeWdl+eahOWxgOmDqOeKtuaAgQogICAgICBzdGF0ZS5leHBpcmVzQXQgPSBleHBpcmVzQXQ7CiAgICB9LAogICAgTG9naW5PdXQ6IGZ1bmN0aW9uIExvZ2luT3V0KHN0YXRlKSB7CiAgICAgIHN0YXRlLnVzZXJJbmZvID0ge307CiAgICAgIHN0YXRlLnRva2VuID0gJyc7CiAgICAgIHN0YXRlLmV4cGlyZXNBdCA9ICcnOwogICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ0hvbWUnLAogICAgICAgIHJlcGxhY2U6IHRydWUKICAgICAgfSk7CiAgICAgIHNlc3Npb25TdG9yYWdlLmNsZWFyKCk7CiAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgIH0sCiAgICBSZXNldFVzZXJJbmZvOiBmdW5jdGlvbiBSZXNldFVzZXJJbmZvKHN0YXRlKSB7CiAgICAgIHZhciB1c2VySW5mbyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CiAgICAgIHN0YXRlLnVzZXJJbmZvID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZS51c2VySW5mbyksIHVzZXJJbmZvKTsKICAgIH0KICB9LAoKICAvKgogICByZXMuZGF0YSB7CiAgICAgdXNlckluZm86IGNsYXNzLCAKICAgICB0b2tlbjogc3RyaW5nLAogICAgICBleHBpcmVzQXQ6IHN0cmluZywKICAgICAgY29kZTogaW50LAogICB9CiAgICovCiAgYWN0aW9uczogewogICAgTG9naW5JbjogZnVuY3Rpb24gTG9naW5JbihfcmVmLCBsb2dpbkluZm8pIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgY29tbWl0LCByZXMsIHJlZGlyZWN0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gbG9naW4obG9naW5JbmZvKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldFVzZXJJbmZvJywgcmVzLnVzZXJJbmZvKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0VG9rZW4nLCByZXMudG9rZW4pOwogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRFeHBpcmVzQXQnLCByZXMuZXhwaXJlc0F0KTsKCiAgICAgICAgICAgICAgICBpZiAoIShyZXMuY29kZSA9PT0gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZWRpcmVjdCA9IHJvdXRlci5oaXN0b3J5LmN1cnJlbnQucXVlcnkucmVkaXJlY3Q7CgogICAgICAgICAgICAgICAgaWYgKHJlZGlyZWN0KSB7CiAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBwYXRoOiByZWRpcmVjdAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAnSG9tZScKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVzLmNvZGUpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVzLmNvZGUpOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIExvZ2luT3V0OiBmdW5jdGlvbiBMb2dpbk91dChfcmVmMikgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgY29tbWl0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICAgICAgICAgICAgICBjb21taXQoJ0xvZ2luT3V0Jyk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgZ2V0dGVyczogewogICAgdXNlckluZm86IGZ1bmN0aW9uIHVzZXJJbmZvKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS51c2VySW5mbzsKICAgIH0sCiAgICB0b2tlbjogZnVuY3Rpb24gdG9rZW4oc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnRva2VuOwogICAgfSwKICAgIGV4cGlyZXNBdDogZnVuY3Rpb24gZXhwaXJlc0F0KHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5leHBpcmVzQXQ7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/home/duanyufi/Web/flower/wolfplay/src/store/modules/user.js"],"names":["login","router","user","namespaced","state","userInfo","username","email","IsAdmin","token","expiresAt","mutations","setUserInfo","setToken","setExpiresAt","LoginOut","push","name","replace","sessionStorage","clear","window","location","reload","ResetUserInfo","actions","LoginIn","loginInfo","commit","res","console","log","code","redirect","history","current","query","path","getters"],"mappings":"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","sourcesContent":["import { login } from '@/api/user'\nimport router from '@/router/index'\n\nexport const user = {\n  namespaced: true,\n  state: {\n    userInfo: {\n      // uuid: '',\n      username: '',\n      email: '',\n      IsAdmin: false\n    },\n    token: '',\n    expiresAt: ''\n  },\n  mutations: {\n    setUserInfo(state, userInfo) {\n      // 这里的 `state` 对象是模块的局部状态\n      state.userInfo = userInfo\n    },\n    setToken(state, token) {\n      // 这里的 `state` 对象是模块的局部状态\n      state.token = token\n    },\n    setExpiresAt(state, expiresAt) {\n      // 这里的 `state` 对象是模块的局部状态\n      state.expiresAt = expiresAt\n    },\n    LoginOut(state) {\n      state.userInfo = {}\n      state.token = ''\n      state.expiresAt = ''\n      router.push({ name: 'Home', replace: true })\n      sessionStorage.clear()\n      window.location.reload()\n    },\n    ResetUserInfo(state, userInfo = {}) {\n      state.userInfo = {\n        ...state.userInfo,\n        ...userInfo\n      }\n    }\n  },\n  /*\n   res.data {\n     userInfo: class, \n     token: string,\n      expiresAt: string,\n      code: int,\n   }\n   */\n  actions: {\n    async LoginIn({ commit }, loginInfo) {\n      const res = await login(loginInfo)\n      console.log(res);\n      commit('setUserInfo', res.userInfo)\n      commit('setToken', res.token)\n      commit('setExpiresAt', res.expiresAt)\n      if (res.code === 0) {\n        const redirect = router.history.current.query.redirect\n        if (redirect) {\n          router.push({ path: redirect })\n        } else {\n          router.push({ name: 'Home' })\n        }\n        return res.code\n      } else {\n        return res.code\n      }\n    },\n    async LoginOut({ commit }) {\n      commit('LoginOut');\n    }\n  },\n  getters: {\n    userInfo(state) {\n      return state.userInfo\n    },\n    token(state) {\n      return state.token\n    },\n    expiresAt(state) {\n      return state.expiresAt\n    }\n  }\n}\n"]}]}