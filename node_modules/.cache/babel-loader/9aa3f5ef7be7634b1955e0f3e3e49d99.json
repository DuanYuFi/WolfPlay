{"remainingRequest":"/home/duanyufi/Web/flower/wolfplay/node_modules/babel-loader/lib/index.js!/home/duanyufi/Web/flower/wolfplay/node_modules/eslint-loader/index.js??ref--13-0!/home/duanyufi/Web/flower/wolfplay/src/store/modules/user.js","dependencies":[{"path":"/home/duanyufi/Web/flower/wolfplay/src/store/modules/user.js","mtime":1602838598239},{"path":"/home/duanyufi/Web/flower/wolfplay/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/duanyufi/Web/flower/wolfplay/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/duanyufi/Web/flower/wolfplay/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvZHVhbnl1ZmkvV2ViL2Zsb3dlci93b2xmcGxheS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9ob21lL2R1YW55dWZpL1dlYi9mbG93ZXIvd29sZnBsYXkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgeyBsb2dpbiB9IGZyb20gJ0AvYXBpL3VzZXInOwppbXBvcnQgcm91dGVyIGZyb20gJ0Avcm91dGVyL2luZGV4JzsKZXhwb3J0IHZhciB1c2VyID0gewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHsKICAgIHVzZXJJbmZvOiB7CiAgICAgIC8vIHV1aWQ6ICcnLAogICAgICB1c2VybmFtZTogJycsCiAgICAgIGVtYWlsOiAnJywKICAgICAgSXNBZG1pbjogZmFsc2UsCiAgICAgIHV1aWQ6ICcnCiAgICB9LAogICAgdG9rZW46ICcnLAogICAgZXhwaXJlc0F0OiAnJwogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBzZXRVc2VySW5mbzogZnVuY3Rpb24gc2V0VXNlckluZm8oc3RhdGUsIHVzZXJJbmZvKSB7CiAgICAgIC8vIOi/memHjOeahCBgc3RhdGVgIOWvueixoeaYr+aooeWdl+eahOWxgOmDqOeKtuaAgQogICAgICBzdGF0ZS51c2VySW5mbyA9IHVzZXJJbmZvOwogICAgfSwKICAgIHNldFRva2VuOiBmdW5jdGlvbiBzZXRUb2tlbihzdGF0ZSwgdG9rZW4pIHsKICAgICAgLy8g6L+Z6YeM55qEIGBzdGF0ZWAg5a+56LGh5piv5qih5Z2X55qE5bGA6YOo54q25oCBCiAgICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgICB9LAogICAgc2V0RXhwaXJlc0F0OiBmdW5jdGlvbiBzZXRFeHBpcmVzQXQoc3RhdGUsIGV4cGlyZXNBdCkgewogICAgICAvLyDov5nph4znmoQgYHN0YXRlYCDlr7nosaHmmK/mqKHlnZfnmoTlsYDpg6jnirbmgIEKICAgICAgc3RhdGUuZXhwaXJlc0F0ID0gZXhwaXJlc0F0OwogICAgfSwKICAgIExvZ2luT3V0OiBmdW5jdGlvbiBMb2dpbk91dChzdGF0ZSkgewogICAgICBzdGF0ZS51c2VySW5mbyA9IHt9OwogICAgICBzdGF0ZS50b2tlbiA9ICcnOwogICAgICBzdGF0ZS5leHBpcmVzQXQgPSAnJzsKICAgICAgcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdIb21lJywKICAgICAgICByZXBsYWNlOiB0cnVlCiAgICAgIH0pOwogICAgICBzZXNzaW9uU3RvcmFnZS5jbGVhcigpOwogICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICB9LAogICAgUmVzZXRVc2VySW5mbzogZnVuY3Rpb24gUmVzZXRVc2VySW5mbyhzdGF0ZSkgewogICAgICB2YXIgdXNlckluZm8gPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogICAgICBzdGF0ZS51c2VySW5mbyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3RhdGUudXNlckluZm8pLCB1c2VySW5mbyk7CiAgICB9CiAgfSwKCiAgLyoKICAgcmVzLmRhdGEgewogICAgIHVzZXJJbmZvOiBjbGFzcywgCiAgICAgdG9rZW46IHN0cmluZywKICAgICAgZXhwaXJlc0F0OiBzdHJpbmcsCiAgICAgIGNvZGU6IGludCwKICAgfQogICAqLwogIGFjdGlvbnM6IHsKICAgIExvZ2luSW46IGZ1bmN0aW9uIExvZ2luSW4oX3JlZiwgbG9naW5JbmZvKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGNvbW1pdCwgcmVzLCByZWRpcmVjdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGxvZ2luKGxvZ2luSW5mbyk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRVc2VySW5mbycsIHJlcy51c2VySW5mbyk7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldFRva2VuJywgcmVzLnRva2VuKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0RXhwaXJlc0F0JywgcmVzLmV4cGlyZXNBdCk7CgogICAgICAgICAgICAgICAgaWYgKCEocmVzLmNvZGUgPT09IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmVkaXJlY3QgPSByb3V0ZXIuaGlzdG9yeS5jdXJyZW50LnF1ZXJ5LnJlZGlyZWN0OwoKICAgICAgICAgICAgICAgIGlmIChyZWRpcmVjdCkgewogICAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgcGF0aDogcmVkaXJlY3QKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0hvbWUnCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlcy5jb2RlKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlcy5jb2RlKTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBMb2dpbk91dDogZnVuY3Rpb24gTG9naW5PdXQoX3JlZjIpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIGNvbW1pdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogICAgICAgICAgICAgICAgY29tbWl0KCdMb2dpbk91dCcpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIGdldHRlcnM6IHsKICAgIHVzZXJJbmZvOiBmdW5jdGlvbiB1c2VySW5mbyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudXNlckluZm87CiAgICB9LAogICAgdG9rZW46IGZ1bmN0aW9uIHRva2VuKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS50b2tlbjsKICAgIH0sCiAgICBleHBpcmVzQXQ6IGZ1bmN0aW9uIGV4cGlyZXNBdChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuZXhwaXJlc0F0OwogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/duanyufi/Web/flower/wolfplay/src/store/modules/user.js"],"names":["login","router","user","namespaced","state","userInfo","username","email","IsAdmin","uuid","token","expiresAt","mutations","setUserInfo","setToken","setExpiresAt","LoginOut","push","name","replace","sessionStorage","clear","window","location","reload","ResetUserInfo","actions","LoginIn","loginInfo","commit","res","console","log","code","redirect","history","current","query","path","getters"],"mappings":"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","sourcesContent":["import { login } from '@/api/user'\nimport router from '@/router/index'\n\nexport const user = {\n  namespaced: true,\n  state: {\n    userInfo: {\n      // uuid: '',\n      username: '',\n      email: '',\n      IsAdmin: false,\n      uuid: '',\n    },\n    token: '',\n    expiresAt: ''\n  },\n  mutations: {\n    setUserInfo(state, userInfo) {\n      // 这里的 `state` 对象是模块的局部状态\n      state.userInfo = userInfo\n    },\n    setToken(state, token) {\n      // 这里的 `state` 对象是模块的局部状态\n      state.token = token\n    },\n    setExpiresAt(state, expiresAt) {\n      // 这里的 `state` 对象是模块的局部状态\n      state.expiresAt = expiresAt\n    },\n    LoginOut(state) {\n      state.userInfo = {}\n      state.token = ''\n      state.expiresAt = ''\n      router.push({ name: 'Home', replace: true })\n      sessionStorage.clear()\n      window.location.reload()\n    },\n    ResetUserInfo(state, userInfo = {}) {\n      state.userInfo = {\n        ...state.userInfo,\n        ...userInfo\n      }\n    }\n  },\n  /*\n   res.data {\n     userInfo: class, \n     token: string,\n      expiresAt: string,\n      code: int,\n   }\n   */\n  actions: {\n    async LoginIn({ commit }, loginInfo) {\n      const res = await login(loginInfo)\n      console.log(res);\n      commit('setUserInfo', res.userInfo)\n      commit('setToken', res.token)\n      commit('setExpiresAt', res.expiresAt)\n      if (res.code === 0) {\n        const redirect = router.history.current.query.redirect\n        if (redirect) {\n          router.push({ path: redirect })\n        } else {\n          router.push({ name: 'Home' })\n        }\n        return res.code\n      } else {\n        return res.code\n      }\n    },\n    async LoginOut({ commit }) {\n      commit('LoginOut');\n    }\n  },\n  getters: {\n    userInfo(state) {\n      return state.userInfo\n    },\n    token(state) {\n      return state.token\n    },\n    expiresAt(state) {\n      return state.expiresAt\n    }\n  }\n}\n"]}]}