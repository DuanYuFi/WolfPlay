{"remainingRequest":"/home/duanyufi/Web/flower/wolfplay/node_modules/babel-loader/lib/index.js!/home/duanyufi/Web/flower/wolfplay/node_modules/eslint-loader/index.js??ref--13-0!/home/duanyufi/Web/flower/wolfplay/src/store/modules/user.js","dependencies":[{"path":"/home/duanyufi/Web/flower/wolfplay/src/store/modules/user.js","mtime":1602149519781},{"path":"/home/duanyufi/Web/flower/wolfplay/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/duanyufi/Web/flower/wolfplay/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/duanyufi/Web/flower/wolfplay/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvZHVhbnl1ZmkvV2ViL2Zsb3dlci93b2xmcGxheS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9ob21lL2R1YW55dWZpL1dlYi9mbG93ZXIvd29sZnBsYXkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgeyBsb2dpbiB9IGZyb20gJ0AvYXBpL3VzZXInOwppbXBvcnQgeyBqc29uSW5CbGFja2xpc3QgfSBmcm9tICdAL2FwaS9qd3QnOwppbXBvcnQgcm91dGVyIGZyb20gJ0Avcm91dGVyL2luZGV4JzsKZXhwb3J0IHZhciB1c2VyID0gewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHsKICAgIHVzZXJJbmZvOiB7CiAgICAgIHV1aWQ6ICcnLAogICAgICB1c2VybmFtZTogJycsCiAgICAgIGVtYWlsOiAnJywKICAgICAgSXNBZG1pbjogZmFsc2UKICAgIH0sCiAgICB0b2tlbjogJycsCiAgICBleHBpcmVzQXQ6ICcnCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHNldFVzZXJJbmZvOiBmdW5jdGlvbiBzZXRVc2VySW5mbyhzdGF0ZSwgdXNlckluZm8pIHsKICAgICAgLy8g6L+Z6YeM55qEIGBzdGF0ZWAg5a+56LGh5piv5qih5Z2X55qE5bGA6YOo54q25oCBCiAgICAgIHN0YXRlLnVzZXJJbmZvID0gdXNlckluZm87CiAgICB9LAogICAgc2V0VG9rZW46IGZ1bmN0aW9uIHNldFRva2VuKHN0YXRlLCB0b2tlbikgewogICAgICAvLyDov5nph4znmoQgYHN0YXRlYCDlr7nosaHmmK/mqKHlnZfnmoTlsYDpg6jnirbmgIEKICAgICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICAgIH0sCiAgICBzZXRFeHBpcmVzQXQ6IGZ1bmN0aW9uIHNldEV4cGlyZXNBdChzdGF0ZSwgZXhwaXJlc0F0KSB7CiAgICAgIC8vIOi/memHjOeahCBgc3RhdGVgIOWvueixoeaYr+aooeWdl+eahOWxgOmDqOeKtuaAgQogICAgICBzdGF0ZS5leHBpcmVzQXQgPSBleHBpcmVzQXQ7CiAgICB9LAogICAgTG9naW5PdXQ6IGZ1bmN0aW9uIExvZ2luT3V0KHN0YXRlKSB7CiAgICAgIHN0YXRlLnVzZXJJbmZvID0ge307CiAgICAgIHN0YXRlLnRva2VuID0gJyc7CiAgICAgIHN0YXRlLmV4cGlyZXNBdCA9ICcnOwogICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ2xvZ2luJywKICAgICAgICByZXBsYWNlOiB0cnVlCiAgICAgIH0pOwogICAgICBzZXNzaW9uU3RvcmFnZS5jbGVhcigpOwogICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICB9LAogICAgUmVzZXRVc2VySW5mbzogZnVuY3Rpb24gUmVzZXRVc2VySW5mbyhzdGF0ZSkgewogICAgICB2YXIgdXNlckluZm8gPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogICAgICBzdGF0ZS51c2VySW5mbyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3RhdGUudXNlckluZm8pLCB1c2VySW5mbyk7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBMb2dpbkluOiBmdW5jdGlvbiBMb2dpbkluKF9yZWYsIGxvZ2luSW5mbykgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBjb21taXQsIHJlcywgcmVkaXJlY3Q7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBsb2dpbihsb2dpbkluZm8pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRVc2VySW5mbycsIHJlcy5kYXRhLnVzZXIpOwogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRUb2tlbicsIHJlcy5kYXRhLnRva2VuKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0RXhwaXJlc0F0JywgcmVzLmRhdGEuZXhwaXJlc0F0KTsKCiAgICAgICAgICAgICAgICBpZiAoIShyZXMuY29kZSA9PT0gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZWRpcmVjdCA9IHJvdXRlci5oaXN0b3J5LmN1cnJlbnQucXVlcnkucmVkaXJlY3Q7CgogICAgICAgICAgICAgICAgaWYgKHJlZGlyZWN0KSB7CiAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBwYXRoOiByZWRpcmVjdAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBwYXRoOiAnL2NhdGVnb3J5JwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCByZXMuY29kZSk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCByZXMuY29kZSk7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgTG9naW5PdXQ6IGZ1bmN0aW9uIExvZ2luT3V0KF9yZWYyKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBjb21taXQsIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGpzb25JbkJsYWNrbGlzdCgpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgY29tbWl0KCdMb2dpbk91dCcpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIGdldHRlcnM6IHsKICAgIHVzZXJJbmZvOiBmdW5jdGlvbiB1c2VySW5mbyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudXNlckluZm87CiAgICB9LAogICAgdG9rZW46IGZ1bmN0aW9uIHRva2VuKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS50b2tlbjsKICAgIH0sCiAgICBleHBpcmVzQXQ6IGZ1bmN0aW9uIGV4cGlyZXNBdChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuZXhwaXJlc0F0OwogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/duanyufi/Web/flower/wolfplay/src/store/modules/user.js"],"names":["login","jsonInBlacklist","router","user","namespaced","state","userInfo","uuid","username","email","IsAdmin","token","expiresAt","mutations","setUserInfo","setToken","setExpiresAt","LoginOut","push","name","replace","sessionStorage","clear","window","location","reload","ResetUserInfo","actions","LoginIn","loginInfo","commit","res","data","code","redirect","history","current","query","path","getters"],"mappings":"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","sourcesContent":["import { login } from '@/api/user'\nimport { jsonInBlacklist } from '@/api/jwt'\nimport router from '@/router/index'\nexport const user = {\n  namespaced: true,\n  state: {\n    userInfo: {\n      uuid: '',\n      username: '',\n      email: '',\n      IsAdmin: false\n    },\n    token: '',\n    expiresAt: ''\n  },\n  mutations: {\n    setUserInfo (state, userInfo) {\n      // 这里的 `state` 对象是模块的局部状态\n      state.userInfo = userInfo\n    },\n    setToken (state, token) {\n      // 这里的 `state` 对象是模块的局部状态\n      state.token = token\n    },\n    setExpiresAt (state, expiresAt) {\n      // 这里的 `state` 对象是模块的局部状态\n      state.expiresAt = expiresAt\n    },\n    LoginOut (state) {\n      state.userInfo = {}\n      state.token = ''\n      state.expiresAt = ''\n      router.push({ name: 'login', replace: true })\n      sessionStorage.clear()\n      window.location.reload()\n    },\n    ResetUserInfo (state, userInfo = {}) {\n      state.userInfo = {\n        ...state.userInfo,\n        ...userInfo\n      }\n    }\n  },\n  actions: {\n    async LoginIn ({ commit }, loginInfo) {\n      const res = await login(loginInfo)\n      commit('setUserInfo', res.data.user)\n      commit('setToken', res.data.token)\n      commit('setExpiresAt', res.data.expiresAt)\n      if (res.code === 0) {\n        const redirect = router.history.current.query.redirect\n        if (redirect) {\n          router.push({ path: redirect })\n        } else {\n          router.push({ path: '/category' })\n        }\n        return res.code\n      } else {\n        return res.code\n      }\n    },\n    async LoginOut ({ commit }) {\n      const res = await jsonInBlacklist()\n      if (res.code === 0) {\n        commit('LoginOut')\n      }\n    }\n  },\n  getters: {\n    userInfo (state) {\n      return state.userInfo\n    },\n    token (state) {\n      return state.token\n    },\n    expiresAt (state) {\n      return state.expiresAt\n    }\n  }\n}\n"]}]}