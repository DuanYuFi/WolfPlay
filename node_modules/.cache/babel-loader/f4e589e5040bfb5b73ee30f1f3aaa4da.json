{"remainingRequest":"/home/duanyufi/Web/flower/wolfplay/node_modules/babel-loader/lib/index.js!/home/duanyufi/Web/flower/wolfplay/node_modules/eslint-loader/index.js??ref--13-0!/home/duanyufi/Web/flower/wolfplay/src/store/modules/user.js","dependencies":[{"path":"/home/duanyufi/Web/flower/wolfplay/src/store/modules/user.js","mtime":1602867334865},{"path":"/home/duanyufi/Web/flower/wolfplay/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/duanyufi/Web/flower/wolfplay/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/duanyufi/Web/flower/wolfplay/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvZHVhbnl1ZmkvV2ViL2Zsb3dlci93b2xmcGxheS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9ob21lL2R1YW55dWZpL1dlYi9mbG93ZXIvd29sZnBsYXkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgeyBsb2dpbiwgbG9nb3V0IH0gZnJvbSAnQC9hcGkvdXNlcic7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXIvaW5kZXgnOwpleHBvcnQgdmFyIHVzZXIgPSB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogewogICAgdXNlckluZm86IHsKICAgICAgLy8gdXVpZDogJycsCiAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgZW1haWw6ICcnLAogICAgICBJc0FkbWluOiBmYWxzZSwKICAgICAgdXVpZDogJycKICAgIH0sCiAgICB0b2tlbjogJycsCiAgICBleHBpcmVzQXQ6ICcnCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHNldFVzZXJJbmZvOiBmdW5jdGlvbiBzZXRVc2VySW5mbyhzdGF0ZSwgdXNlckluZm8pIHsKICAgICAgLy8g6L+Z6YeM55qEIGBzdGF0ZWAg5a+56LGh5piv5qih5Z2X55qE5bGA6YOo54q25oCBCiAgICAgIHN0YXRlLnVzZXJJbmZvID0gdXNlckluZm87CiAgICB9LAogICAgc2V0VG9rZW46IGZ1bmN0aW9uIHNldFRva2VuKHN0YXRlLCB0b2tlbikgewogICAgICAvLyDov5nph4znmoQgYHN0YXRlYCDlr7nosaHmmK/mqKHlnZfnmoTlsYDpg6jnirbmgIEKICAgICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICAgIH0sCiAgICBzZXRFeHBpcmVzQXQ6IGZ1bmN0aW9uIHNldEV4cGlyZXNBdChzdGF0ZSwgZXhwaXJlc0F0KSB7CiAgICAgIC8vIOi/memHjOeahCBgc3RhdGVgIOWvueixoeaYr+aooeWdl+eahOWxgOmDqOeKtuaAgQogICAgICBzdGF0ZS5leHBpcmVzQXQgPSBleHBpcmVzQXQ7CiAgICB9LAogICAgTG9naW5PdXQ6IGZ1bmN0aW9uIExvZ2luT3V0KHN0YXRlKSB7CiAgICAgIHN0YXRlLnVzZXJJbmZvID0ge307CiAgICAgIHN0YXRlLnRva2VuID0gJyc7CiAgICAgIHN0YXRlLmV4cGlyZXNBdCA9ICcnOwogICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ0hvbWUnLAogICAgICAgIHJlcGxhY2U6IHRydWUKICAgICAgfSk7CiAgICAgIHNlc3Npb25TdG9yYWdlLmNsZWFyKCk7CiAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgIH0sCiAgICBSZXNldFVzZXJJbmZvOiBmdW5jdGlvbiBSZXNldFVzZXJJbmZvKHN0YXRlKSB7CiAgICAgIHZhciB1c2VySW5mbyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CiAgICAgIHN0YXRlLnVzZXJJbmZvID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZS51c2VySW5mbyksIHVzZXJJbmZvKTsKICAgIH0KICB9LAoKICAvKgogICByZXMuZGF0YSB7CiAgICAgdXNlckluZm86IGNsYXNzLCAKICAgICB0b2tlbjogc3RyaW5nLAogICAgICBleHBpcmVzQXQ6IHN0cmluZywKICAgICAgY29kZTogaW50LAogICB9CiAgICovCiAgYWN0aW9uczogewogICAgTG9naW5JbjogZnVuY3Rpb24gTG9naW5JbihfcmVmLCBsb2dpbkluZm8pIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgY29tbWl0LCByZXMsIHJlZGlyZWN0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gbG9naW4obG9naW5JbmZvKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldFVzZXJJbmZvJywgcmVzLnVzZXJJbmZvKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0VG9rZW4nLCByZXMudG9rZW4pOwogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRFeHBpcmVzQXQnLCByZXMuZXhwaXJlc0F0KTsKCiAgICAgICAgICAgICAgICBpZiAoIShyZXMuY29kZSA9PT0gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZWRpcmVjdCA9IHJvdXRlci5oaXN0b3J5LmN1cnJlbnQucXVlcnkucmVkaXJlY3Q7CgogICAgICAgICAgICAgICAgaWYgKHJlZGlyZWN0KSB7CiAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBwYXRoOiByZWRpcmVjdAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAnSG9tZScKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVzLmNvZGUpOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVzLmNvZGUpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIExvZ2luT3V0OiBmdW5jdGlvbiBMb2dpbk91dChfcmVmMiwgbG9nb3V0SW5mbykgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgY29tbWl0LCByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBsb2dvdXQobG9nb3V0SW5mbyk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnTG9naW5PdXQnKTsKCiAgICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICdIb21lJwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgcmVzLmNvZGUpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIGdldHRlcnM6IHsKICAgIHVzZXJJbmZvOiBmdW5jdGlvbiB1c2VySW5mbyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudXNlckluZm87CiAgICB9LAogICAgdG9rZW46IGZ1bmN0aW9uIHRva2VuKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS50b2tlbjsKICAgIH0sCiAgICBleHBpcmVzQXQ6IGZ1bmN0aW9uIGV4cGlyZXNBdChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuZXhwaXJlc0F0OwogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/duanyufi/Web/flower/wolfplay/src/store/modules/user.js"],"names":["login","logout","router","user","namespaced","state","userInfo","username","email","IsAdmin","uuid","token","expiresAt","mutations","setUserInfo","setToken","setExpiresAt","LoginOut","push","name","replace","sessionStorage","clear","window","location","reload","ResetUserInfo","actions","LoginIn","loginInfo","commit","res","code","redirect","history","current","query","path","logoutInfo","console","log","getters"],"mappings":"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","sourcesContent":["import { login, logout } from '@/api/user'\nimport router from '@/router/index'\n\nexport const user = {\n  namespaced: true,\n  state: {\n    userInfo: {\n      // uuid: '',\n      username: '',\n      email: '',\n      IsAdmin: false,\n      uuid: '',\n    },\n    token: '',\n    expiresAt: ''\n  },\n  mutations: {\n    setUserInfo(state, userInfo) {\n      // 这里的 `state` 对象是模块的局部状态\n      state.userInfo = userInfo\n    },\n    setToken(state, token) {\n      // 这里的 `state` 对象是模块的局部状态\n      state.token = token\n    },\n    setExpiresAt(state, expiresAt) {\n      // 这里的 `state` 对象是模块的局部状态\n      state.expiresAt = expiresAt\n    },\n    LoginOut(state) {\n      state.userInfo = {}\n      state.token = ''\n      state.expiresAt = ''\n      router.push({ name: 'Home', replace: true })\n      sessionStorage.clear()\n      window.location.reload()\n    },\n    ResetUserInfo(state, userInfo = {}) {\n      state.userInfo = {\n        ...state.userInfo,\n        ...userInfo\n      }\n    }\n  },\n  /*\n   res.data {\n     userInfo: class, \n     token: string,\n      expiresAt: string,\n      code: int,\n   }\n   */\n  actions: {\n    async LoginIn({ commit }, loginInfo) {\n      const res = await login(loginInfo)\n      // console.log(res);\n      commit('setUserInfo', res.userInfo)\n      commit('setToken', res.token)\n      commit('setExpiresAt', res.expiresAt)\n      if (res.code === 0) {\n        const redirect = router.history.current.query.redirect\n        if (redirect) {\n          router.push({ path: redirect })\n        } else {\n          router.push({ name: 'Home' })\n        }\n        return res.code\n      } else {\n        return res.code\n      }\n    },\n    async LoginOut({ commit }, logoutInfo) {\n      const res = await logout(logoutInfo);\n      console.log(res)\n      commit('LoginOut');\n      if (res.code === 0) {\n        router.push({ name: 'Home' })\n      }\n      return res.code\n    }\n  },\n  getters: {\n    userInfo(state) {\n      return state.userInfo\n    },\n    token(state) {\n      return state.token\n    },\n    expiresAt(state) {\n      return state.expiresAt\n    }\n  }\n}\n"]}]}